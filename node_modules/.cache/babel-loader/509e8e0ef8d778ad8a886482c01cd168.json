{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _util = require('./util');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar getNumber = function getNumber(region) {\n  var sum = 0;\n  var decimalReached = false;\n  var decimalUnits = [];\n  region.subRegions.forEach(function (subRegion) {\n    var tokens = subRegion.tokens;\n    var type = subRegion.type;\n    var subRegionSum = 0;\n\n    if (type === _constants.TOKEN_TYPE.DECIMAL) {\n      decimalReached = true;\n      return;\n    }\n\n    if (decimalReached) {\n      decimalUnits.push(subRegion);\n      return;\n    }\n\n    switch (type) {\n      case _constants.TOKEN_TYPE.MAGNITUDE:\n      case _constants.TOKEN_TYPE.HUNDRED:\n        {\n          var _ret = function () {\n            subRegionSum = 1;\n            var tokensCount = tokens.length;\n            tokens.reduce(function (acc, token, i) {\n              if (token.type === _constants.TOKEN_TYPE.HUNDRED) {\n                var _ret2 = function () {\n                  var tokensToAdd = tokensCount - 1 ? tokens.slice(i + 1) : [];\n                  tokensToAdd = tokensToAdd.filter(function (tokenToAdd, j) {\n                    return j === 0 || tokensToAdd[j - 1].type > tokenToAdd.type;\n                  });\n                  var tokensToAddSum = tokensToAdd.reduce(function (acc2, tokenToAdd) {\n                    return acc2 + _constants.NUMBER[tokenToAdd.lowerCaseValue];\n                  }, 0);\n                  return {\n                    v: acc.concat((0, _extends3.default)({}, tokens[i + 1], {\n                      numberValue: tokensToAddSum + _constants.NUMBER[token.lowerCaseValue] * 100\n                    }))\n                  };\n                }();\n\n                if ((typeof _ret2 === 'undefined' ? 'undefined' : (0, _typeof3.default)(_ret2)) === \"object\") return _ret2.v;\n              }\n\n              if (i > 0 && tokens[i - 1].type === _constants.TOKEN_TYPE.HUNDRED) return acc;\n              if (i > 1 && tokens[i - 1].type === _constants.TOKEN_TYPE.TEN && tokens[i - 2].type === _constants.TOKEN_TYPE.HUNDRED) return acc;\n              return acc.concat({\n                token: token,\n                numberValue: _constants.NUMBER[token.lowerCaseValue]\n              });\n            }, []).forEach(function (_ref) {\n              var numberValue = _ref.numberValue;\n              subRegionSum *= numberValue;\n            });\n            return 'break';\n          }();\n\n          if (_ret === 'break') break;\n        }\n\n      case _constants.TOKEN_TYPE.UNIT:\n      case _constants.TOKEN_TYPE.TEN:\n        {\n          tokens.forEach(function (token) {\n            subRegionSum += _constants.NUMBER[token.lowerCaseValue];\n          });\n          break;\n        }\n      // no default\n    }\n\n    sum += subRegionSum;\n  });\n  var currentDecimalPlace = 1;\n  decimalUnits.forEach(function (_ref2) {\n    var tokens = _ref2.tokens;\n    tokens.forEach(function (_ref3) {\n      var lowerCaseValue = _ref3.lowerCaseValue;\n      sum += _constants.NUMBER[lowerCaseValue] / Math.pow(10, currentDecimalPlace);\n      currentDecimalPlace += 1;\n    });\n  });\n  return sum;\n};\n\nvar replaceRegionsInText = function replaceRegionsInText(regions, text) {\n  var replaced = text;\n  var offset = 0;\n  regions.forEach(function (region) {\n    var length = region.end - region.start + 1;\n    var replaceWith = '' + getNumber(region);\n    replaced = (0, _util.splice)(replaced, region.start + offset, length, replaceWith);\n    offset -= length - replaceWith.length;\n  });\n  return replaced;\n};\n\nexports.default = function (_ref4) {\n  var regions = _ref4.regions;\n  var text = _ref4.text;\n  if (!regions) return text;\n  if (regions[0].end - regions[0].start === text.length - 1) return getNumber(regions[0]);\n  return replaceRegionsInText(regions, text);\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","_typeof2","require","_typeof3","_interopRequireDefault","_extends2","_extends3","_util","_constants","obj","__esModule","default","getNumber","region","sum","decimalReached","decimalUnits","subRegions","forEach","subRegion","tokens","type","subRegionSum","TOKEN_TYPE","DECIMAL","push","MAGNITUDE","HUNDRED","_ret","tokensCount","length","reduce","acc","token","i","_ret2","tokensToAdd","slice","filter","tokenToAdd","j","tokensToAddSum","acc2","NUMBER","lowerCaseValue","v","concat","numberValue","TEN","_ref","UNIT","currentDecimalPlace","_ref2","_ref3","Math","pow","replaceRegionsInText","regions","text","replaced","offset","end","start","replaceWith","splice","_ref4"],"sources":["/Users/digitalbrum/work/E-News/node_modules/words-to-numbers/dist/compiler.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _util = require('./util');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getNumber = function getNumber(region) {\n  var sum = 0;\n  var decimalReached = false;\n  var decimalUnits = [];\n  region.subRegions.forEach(function (subRegion) {\n    var tokens = subRegion.tokens;\n    var type = subRegion.type;\n\n    var subRegionSum = 0;\n    if (type === _constants.TOKEN_TYPE.DECIMAL) {\n      decimalReached = true;\n      return;\n    }\n    if (decimalReached) {\n      decimalUnits.push(subRegion);\n      return;\n    }\n    switch (type) {\n      case _constants.TOKEN_TYPE.MAGNITUDE:\n      case _constants.TOKEN_TYPE.HUNDRED:\n        {\n          var _ret = function () {\n            subRegionSum = 1;\n            var tokensCount = tokens.length;\n            tokens.reduce(function (acc, token, i) {\n              if (token.type === _constants.TOKEN_TYPE.HUNDRED) {\n                var _ret2 = function () {\n                  var tokensToAdd = tokensCount - 1 ? tokens.slice(i + 1) : [];\n                  tokensToAdd = tokensToAdd.filter(function (tokenToAdd, j) {\n                    return j === 0 || tokensToAdd[j - 1].type > tokenToAdd.type;\n                  });\n                  var tokensToAddSum = tokensToAdd.reduce(function (acc2, tokenToAdd) {\n                    return acc2 + _constants.NUMBER[tokenToAdd.lowerCaseValue];\n                  }, 0);\n                  return {\n                    v: acc.concat((0, _extends3.default)({}, tokens[i + 1], {\n                      numberValue: tokensToAddSum + _constants.NUMBER[token.lowerCaseValue] * 100\n                    }))\n                  };\n                }();\n\n                if ((typeof _ret2 === 'undefined' ? 'undefined' : (0, _typeof3.default)(_ret2)) === \"object\") return _ret2.v;\n              }\n              if (i > 0 && tokens[i - 1].type === _constants.TOKEN_TYPE.HUNDRED) return acc;\n              if (i > 1 && tokens[i - 1].type === _constants.TOKEN_TYPE.TEN && tokens[i - 2].type === _constants.TOKEN_TYPE.HUNDRED) return acc;\n              return acc.concat({ token: token, numberValue: _constants.NUMBER[token.lowerCaseValue] });\n            }, []).forEach(function (_ref) {\n              var numberValue = _ref.numberValue;\n\n              subRegionSum *= numberValue;\n            });\n            return 'break';\n          }();\n\n          if (_ret === 'break') break;\n        }\n      case _constants.TOKEN_TYPE.UNIT:\n      case _constants.TOKEN_TYPE.TEN:\n        {\n          tokens.forEach(function (token) {\n            subRegionSum += _constants.NUMBER[token.lowerCaseValue];\n          });\n          break;\n        }\n      // no default\n    }\n    sum += subRegionSum;\n  });\n\n  var currentDecimalPlace = 1;\n  decimalUnits.forEach(function (_ref2) {\n    var tokens = _ref2.tokens;\n\n    tokens.forEach(function (_ref3) {\n      var lowerCaseValue = _ref3.lowerCaseValue;\n\n      sum += _constants.NUMBER[lowerCaseValue] / Math.pow(10, currentDecimalPlace);\n      currentDecimalPlace += 1;\n    });\n  });\n\n  return sum;\n};\n\nvar replaceRegionsInText = function replaceRegionsInText(regions, text) {\n  var replaced = text;\n  var offset = 0;\n  regions.forEach(function (region) {\n    var length = region.end - region.start + 1;\n    var replaceWith = '' + getNumber(region);\n    replaced = (0, _util.splice)(replaced, region.start + offset, length, replaceWith);\n    offset -= length - replaceWith.length;\n  });\n  return replaced;\n};\n\nexports.default = function (_ref4) {\n  var regions = _ref4.regions;\n  var text = _ref4.text;\n\n  if (!regions) return text;\n  if (regions[0].end - regions[0].start === text.length - 1) return getNumber(regions[0]);\n  return replaceRegionsInText(regions, text);\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}